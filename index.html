<head>
    <link rel="stylesheet" href="style.css">
    <meta name="viewport"
    content="width=device-width, user-scalable=no, initial-scale=1.0, minimum scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    </head>
    <body>  
    
        <form id="form" >
        <h2 class="form-title" id="login">Hello, please authorize</h2>
            <div class="form-holder">
                <input type="email" class="input" placeholder="Email" id="email" />
                <input type="password" class="input" placeholder="Password" id="password" />
            </div>
            <div id="error"></div>
    <button id="submit" class="submit-btn">Log in</button>
        </form>
        <script src="https://telegram.org/js/telegram-web-app.js"></script>
        <script>
    let tg = window.Telegram.WebApp;
    let submit = document.getElementById("submit");
    submit.addEventListener("click", async (e) => {
        e.preventDefault()
        let username = document.getElementById('email').value;
        let password = document.getElementById('password').value;
        let data={};
       data.login = username;
       data.password = password;
       console.log(JSON.stringify(data))
         if (password.length < 8) {
            document.getElementById("error").innerText = 'Minimum 8 characters!';
            return;
        }
        let response =  await fetch("https://api.oneapp.ly/auth/login", {method: "POST",
       body: JSON.stringify(data),
       headers: {
         "Content-type": "application/json; charset=UTF-8"
       }
     })
    tg.sendData(JSON.stringify(response));
  
    tg.close();
    })
        </script>
    </body>
    
